<form
  [formGroup]="empleadoForm"
  (ngSubmit)="submit()"
  class="empleado-form"
  novalidate
>
  <header class="empleado-form__header">
    <div class="empleado-form__heading">
      <p class="empleado-form__eyebrow">Gestion de equipo</p>
      <h2>Nuevo empleado</h2>
      <p class="empleado-form__lead">
        Completa los datos para sumar un nuevo integrante a tu equipo.
      </p>
    </div>

    <button
      type="button"
      class="empleado-form__cancel"
      (click)="cancelar()"
      [disabled]="isSubmitting()"
    >
      Cancelar
    </button>
  </header>

  <div class="empleado-form__body">
    @let nombreCtrl = empleadoForm.get('nombre');
    <div class="field">
      <label for="nombre">Nombre</label>
      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        placeholder="Ej: Sofia"
        [class.invalid]="nombreCtrl?.touched && nombreCtrl?.invalid"
      />
      @if (nombreCtrl?.touched && nombreCtrl?.hasError('required')) {
        <p class="error">El nombre es obligatorio.</p>
      }
    </div>

    @let apellidoCtrl = empleadoForm.get('apellido');
    <div class="field">
      <label for="apellido">Apellido</label>
      <input
        id="apellido"
        type="text"
        formControlName="apellido"
        placeholder="Ej: Torres"
        [class.invalid]="apellidoCtrl?.touched && apellidoCtrl?.invalid"
      />
      @if (apellidoCtrl?.touched && apellidoCtrl?.hasError('required')) {
        <p class="error">El apellido es obligatorio.</p>
      }
    </div>

    @let dniCtrl = empleadoForm.get('dni');
    <div class="field">
      <label for="dni">DNI</label>
      <input
        id="dni"
        type="text"
        formControlName="dni"
        placeholder="Ej: 40.123.456"
        inputmode="numeric"
        maxlength="8"
        [class.invalid]="dniCtrl?.touched && dniCtrl?.invalid"
      />
      @if (dniCtrl?.touched && dniCtrl?.hasError('required')) {
        <p class="error">El DNI es obligatorio.</p>
      }
      @if (dniCtrl?.touched && dniCtrl?.hasError('pattern')) {
        <p class="error">Solo numeros (7 u 8 digitos).</p>
      }
    </div>

    @let telefonoCtrl = empleadoForm.get('telefono');
    <div class="field">
      <label for="telefono">Telefono</label>
      <input
        id="telefono"
        type="tel"
        formControlName="telefono"
        placeholder="Ej: +54 9 11 2233 4455"
        maxlength="10"
        [class.invalid]="telefonoCtrl?.touched && telefonoCtrl?.invalid"
      />
      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('required')) {
        <p class="error">El telefono es obligatorio.</p>
      }
      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('pattern')) {
        <p class="error">Debe tener exactamente 10 numeros.</p>
      }
    </div>

    @let emailCtrl = empleadoForm.get('email');
    <div class="field">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ej: sofia@empresa.com"
        [class.invalid]="emailCtrl?.touched && emailCtrl?.invalid"
      />
      @if (emailCtrl?.touched && emailCtrl?.invalid) {
        <p class="error">Ingresa un email valido.</p>
      }
    </div>

    @let contrasenaCtrl = empleadoForm.get('contrasena');
    @let confirmarContrasenaCtrl = empleadoForm.get('confirmarContrasena');

    <div class="field">
      <label for="contrasena">Contrasena</label>
      <input
        id="contrasena"
        type="password"
        formControlName="contrasena"
        placeholder="Minimo 4 caracteres y un numero"
        [class.invalid]="contrasenaCtrl?.touched && contrasenaCtrl?.invalid"
      />
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('required')) {
        <p class="error">La contrasena es obligatoria.</p>
      }
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('minlength')) {
        <p class="error">Debe tener al menos 4 caracteres.</p>
      }
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('pattern')) {
        <p class="error">Incluye al menos un numero.</p>
      }
    </div>

    <div class="field">
      <label for="confirmarContrasena">Confirmar contrasena</label>
      <input
        id="confirmarContrasena"
        type="password"
        formControlName="confirmarContrasena"
        placeholder="Repite la contrasena"
        [class.invalid]="confirmarContrasenaCtrl?.touched && confirmarContrasenaCtrl?.invalid"
      />
      @if (confirmarContrasenaCtrl?.touched && confirmarContrasenaCtrl?.hasError('required')) {
        <p class="error">La confirmacion es obligatoria.</p>
      }
      @if (confirmarContrasenaCtrl?.touched && confirmarContrasenaCtrl?.hasError('minlength')) {
        <p class="error">Debe tener al menos 4 caracteres.</p>
      }
      @if (confirmarContrasenaCtrl?.touched && confirmarContrasenaCtrl?.hasError('pattern')) {
        <p class="error">Incluye al menos un numero.</p>
      }
      @if (confirmarContrasenaCtrl?.touched && confirmarContrasenaCtrl?.hasError('mismatch')) {
        <p class="error">Las contrasenas no coinciden.</p>
      }
    </div>

    <div class="field">
      <label for="legajo">Legajo</label>
      <input
        id="legajo"
        type="text"
        formControlName="legajo"
        placeholder="Opcional"
      />
    </div>
    <div class="field field--readonly">
      <label>Rol asignado</label>
      <div class="readonly-pill">EMPLEADO</div>
    </div>
  </div>

  @if (errorMessage()) {
    <p class="empleado-form__alert">{{ errorMessage() }}</p>
  }

  <footer class="empleado-form__actions">
    <button
      type="submit"
      class="empleado-form__submit"
      [disabled]="isSubmitting() || empleadoForm.invalid"
    >
      {{ isSubmitting() ? 'Guardando...' : 'Guardar empleado' }}
    </button>
  </footer>
</form>
