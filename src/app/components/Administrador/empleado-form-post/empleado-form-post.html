<form
  [formGroup]="empleadoForm"
  (ngSubmit)="submit()"
  class="empleado-form"
  novalidate
>
  <header class="empleado-form__header">
    <div class="empleado-form__heading">
      <p class="empleado-form__eyebrow">Gestion de equipo</p>
      <h2>Nuevo empleado</h2>
      <p class="empleado-form__lead">
        Completa los datos para sumar un nuevo integrante a tu equipo.
      </p>
    </div>

    <button
      type="button"
      class="empleado-form__cancel"
      (click)="cancelar()"
      [disabled]="isSubmitting()"
    >
      Cancelar
    </button>
  </header>

  <div class="empleado-form__body">
    @let nombreCtrl = empleadoForm.get('nombre');
    <div class="field">
      <label for="nombre">Nombre</label>
      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        placeholder="Ej: Sofia"
        [class.invalid]="nombreCtrl?.touched && nombreCtrl?.invalid"
      />
      @if (nombreCtrl?.touched && nombreCtrl?.hasError('required')) {
        <p class="error">El nombre es obligatorio.</p>
      }
    </div>

    @let apellidoCtrl = empleadoForm.get('apellido');
    <div class="field">
      <label for="apellido">Apellido</label>
      <input
        id="apellido"
        type="text"
        formControlName="apellido"
        placeholder="Ej: Torres"
        [class.invalid]="apellidoCtrl?.touched && apellidoCtrl?.invalid"
      />
      @if (apellidoCtrl?.touched && apellidoCtrl?.hasError('required')) {
        <p class="error">El apellido es obligatorio.</p>
      }
    </div>

    @let dniCtrl = empleadoForm.get('dni');
    <div class="field">
      <label for="dni">DNI</label>
      <input
        id="dni"
        type="text"
        formControlName="dni"
        placeholder="Ej: 40.123.456"
        [class.invalid]="dniCtrl?.touched && dniCtrl?.invalid"
      />
      @if (dniCtrl?.touched && dniCtrl?.hasError('required')) {
        <p class="error">El DNI es obligatorio.</p>
      }
    </div>

    @let telefonoCtrl = empleadoForm.get('telefono');
    <div class="field">
      <label for="telefono">Telefono</label>
      <input
        id="telefono"
        type="tel"
        formControlName="telefono"
        placeholder="Ej: +54 9 11 2233 4455"
        [class.invalid]="telefonoCtrl?.touched && telefonoCtrl?.invalid"
      />
      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('required')) {
        <p class="error">El telefono es obligatorio.</p>
      }
    </div>

    @let emailCtrl = empleadoForm.get('email');
    <div class="field">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ej: sofia@empresa.com"
        [class.invalid]="emailCtrl?.touched && emailCtrl?.invalid"
      />
      @if (emailCtrl?.touched && emailCtrl?.invalid) {
        <p class="error">Ingresa un email valido.</p>
      }
    </div>

    @let contrasenaCtrl = empleadoForm.get('contrasena');
    <div class="field">
      <label for="contrasena">Contrasena</label>
      <input
        id="contrasena"
        type="password"
        formControlName="contrasena"
        placeholder="Minimo 8 caracteres"
        [class.invalid]="contrasenaCtrl?.touched && contrasenaCtrl?.invalid"
      />
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('required')) {
        <p class="error">La contrasena es obligatoria.</p>
      }
    </div>

    <div class="field">
      <label for="legajo">Legajo</label>
      <input
        id="legajo"
        type="text"
        formControlName="legajo"
        placeholder="Opcional"
      />
    </div>

    @let rolCtrl = empleadoForm.get('rol');
    <div class="field">
      <label for="rol">Rol</label>
      <select
        id="rol"
        formControlName="rol"
        [class.invalid]="rolCtrl?.touched && rolCtrl?.invalid"
      >
        @for (rol of roles; track rol) {
          <option [ngValue]="rol">{{ rol }}</option>
        }
      </select>
      @if (rolCtrl?.touched && rolCtrl?.hasError('required')) {
        <p class="error">Selecciona un rol.</p>
      }
    </div>
  </div>

  @if (errorMessage()) {
    <p class="empleado-form__alert">{{ errorMessage() }}</p>
  }

  <footer class="empleado-form__actions">
    <button
      type="submit"
      class="empleado-form__submit"
      [disabled]="isSubmitting() || empleadoForm.invalid"
    >
      {{ isSubmitting() ? 'Guardando...' : 'Guardar empleado' }}
    </button>
  </footer>
</form>
