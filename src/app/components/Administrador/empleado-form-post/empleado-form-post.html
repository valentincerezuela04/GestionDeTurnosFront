<form
  [formGroup]="empleadoForm"
  (ngSubmit)="submit()"
  class="empleado-form"
  novalidate
>
  <header class="empleado-form__header">
    <div class="empleado-form__heading">
      <p class="empleado-form__eyebrow">Gestion de equipo</p>
      <h2>Nuevo empleado</h2>
      <p class="empleado-form__lead">
        Completa los datos para sumar un nuevo integrante a tu equipo.
      </p>
    </div>

    <button
      type="button"
      class="empleado-form__cancel"
      (click)="cancelar()"
      [disabled]="isSubmitting()"
    >
      Cancelar
    </button>
  </header>

  <div class="empleado-form__body">
    @let nombreCtrl = empleadoForm.get('nombre');
    <div class="field">
      <label for="nombre">Nombre</label>
      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        placeholder="Ej: Sofia"
        [class.invalid]="nombreCtrl?.touched && nombreCtrl?.invalid"
      />
      @if (nombreCtrl?.touched && nombreCtrl?.hasError('required')) {
        <p class="error">El nombre es obligatorio.</p>
      }
       @if (nombreCtrl?.touched && nombreCtrl?.hasError('minlength')) {
        <p class="error">El nombre debe tener al menos 3 caracteres.</p>
      }
    </div>

    @let apellidoCtrl = empleadoForm.get('apellido');
    <div class="field">
      <label for="apellido">Apellido</label>
      <input
        id="apellido"
        type="text"
        formControlName="apellido"
        placeholder="Ej: Torres"
        [class.invalid]="apellidoCtrl?.touched && apellidoCtrl?.invalid"
      />
      @if (apellidoCtrl?.touched && apellidoCtrl?.hasError('required')) {
        <p class="error">El apellido es obligatorio.</p>
      }
        @if (apellidoCtrl?.touched && apellidoCtrl?.hasError('minlength')) {
        <p class="error">El apellido debe tener al menos 3 caracteres.</p>
      }
    </div>

    @let dniCtrl = empleadoForm.get('dni');
    <div class="field">
      <label for="dni">DNI</label>
      <input
        id="dni"
        type="text"
        formControlName="dni"
        placeholder="Ej: 40.123.456"
        inputmode="numeric"
        maxlength="8"
        [class.invalid]="dniCtrl?.touched && dniCtrl?.invalid"
      />
      @if (dniCtrl?.touched && dniCtrl?.hasError('required')) {
        <p class="error">El DNI es obligatorio.</p>
      }

        @if (dniCtrl?.touched && (dniCtrl?.hasError('minlength') || dniCtrl?.hasError('maxlength'))) {
        <p class="error">El DNI debe tener entre 7 y 8 dígitos.</p>
      }
      @if (dniCtrl?.touched && dniCtrl?.hasError('pattern')) {
        <p class="error">El DNI solo puede contener números.</p>

      }
    </div>

    @let telefonoCtrl = empleadoForm.get('telefono');
    <div class="field">
      <label for="telefono">Telefono</label>
      <input
        id="telefono"
        type="tel"
        formControlName="telefono"
        placeholder="Ej: +54 9 11 2233 4455"
        maxlength="10"
        [class.invalid]="telefonoCtrl?.touched && telefonoCtrl?.invalid"
      />
      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('required')) {
        <p class="error">El telefono es obligatorio.</p>
      }

      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('minlength')) {
        <p class="error">El telefono debe tener al menos 8 caracteres.</p>
      }
      @if (telefonoCtrl?.touched && telefonoCtrl?.hasError('pattern')) {
        <p class="error">Ingresa un telefono válido.</p>
      }
    </div>

    @let emailCtrl = empleadoForm.get('email');
    <div class="field">
      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        placeholder="Ej: sofia@empresa.com"
        [class.invalid]="emailCtrl?.touched && emailCtrl?.invalid"
      />
      @if (emailCtrl?.touched && emailCtrl?.invalid) {
        <p class="error">Ingresa un email valido.</p>
      }
    </div>

    @let contrasenaCtrl = empleadoForm.get('contrasena');
    <div class="field">
      <label for="contrasena">Contrasena</label>
      <input
        id="contrasena"
        type="password"
        formControlName="contrasena"
        placeholder="Minimo 4 caracteres y un numero"
        [class.invalid]="contrasenaCtrl?.touched && contrasenaCtrl?.invalid"
      />
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('required')) {
        <p class="error">La contrasena es obligatoria.</p>
      }
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('minlength')) {
        <p class="error">Debe tener al menos  caracteres.</p>
      }
         @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('pattern')) {
        <p class="error">Debe incluir al menos una letra y un numero.</p>
      }
      @if (contrasenaCtrl?.touched && contrasenaCtrl?.hasError('pattern')) {
        <p class="error">Incluye al menos un numero.</p>
      }
    </div>

    <div class="field">
      <label for="legajo">Legajo</label>
      <input
        id="legajo"
        type="text"
        formControlName="legajo"
        placeholder="Opcional"
      />
    </div>


  <div class="field">
  <label>Rol</label>
  <p>Empleado</p> 
</div>


  </div>

  @if (errorMessage()) {
    <p class="empleado-form__alert">{{ errorMessage() }}</p>
  }

  <footer class="empleado-form__actions">
    <button
      type="submit"
      class="empleado-form__submit"
      [disabled]="isSubmitting() || empleadoForm.invalid"
    >
      {{ isSubmitting() ? 'Guardando...' : 'Guardar empleado' }}
    </button>
  </footer>
</form>
