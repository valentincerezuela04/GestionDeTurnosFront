<div
  class="flex min-h-screen items-center justify-center overflow-x-hidden py-10
         bg-[url('https://cdn.flyonui.com/fy-assets/blocks/marketing-ui/auth/auth-background-2.png')]
         bg-cover bg-center bg-no-repeat"
>
  <div class="relative flex items-center justify-center px-4 sm:px-6 lg:px-8">
    <div
      class="bg-base-100 shadow-base-300/20 z-10 w-full space-y-6 rounded-xl p-6 shadow-md sm:min-w-md lg:p-8"
      style="
        --color-primary: var(--accent-500);
        --color-primary-content: #ffffff;

        --color-base-100: var(--card);
        --color-base-200: var(--card-2);
        --color-base-300: var(--border);
        --color-base-content: var(--text);

        --color-success: var(--success);
        --color-warning: var(--warning);
        --color-error: var(--danger);
      "
    >
      <div class="flex items-center gap-3">
        <h2 class="text-base-content text-xl font-bold">Gesti√≥n de Turnos</h2>
      </div>

      <div>
        <h3 class="text-base-content mb-1.5 text-2xl font-semibold">Nuevo empleado</h3>
        <p class="text-base-content/80">Complet√° los datos para crear un empleado.</p>
      </div>

      <form [formGroup]="empleadoForm" (ngSubmit)="submit()" class="space-y-4" novalidate>
        <div class="input-floating w-96">
          <input
            id="nombre"
            type="text"
            placeholder="Tu nombre"
            formControlName="nombre"
            [class.is-invalid]="isInvalid('nombre')"
            [class.is-valid]="isValid('nombre')"
            [ngClass]="[inputBase, isInvalid('nombre') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('nombre') ? 'true' : null"
          />
          <label class="input-floating-label" for="nombre">Nombre</label>

          @if (isInvalid('nombre')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('nombre','required')) { El nombre es obligatorio. }
              @else if (hasError('nombre','minlength')) { Debe tener al menos 3 caracteres. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('nombre')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96">
          <input
            id="apellido"
            type="text"
            placeholder="Tu apellido"
            formControlName="apellido"
            [class.is-invalid]="isInvalid('apellido')"
            [class.is-valid]="isValid('apellido')"
            [ngClass]="[inputBase, isInvalid('apellido') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('apellido') ? 'true' : null"
          />
          <label class="input-floating-label" for="apellido">Apellido</label>

          @if (isInvalid('apellido')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('apellido','required')) { El apellido es obligatorio. }
              @else if (hasError('apellido','minlength')) { Debe tener al menos 3 caracteres. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('apellido')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96">
          <input
            id="dni"
            type="text"
            inputmode="numeric"
            maxlength="8"
            placeholder="7 u 8 d√≠gitos"
            formControlName="dni"
            [class.is-invalid]="isInvalid('dni')"
            [class.is-valid]="isValid('dni')"
            [ngClass]="[inputBase, isInvalid('dni') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('dni') ? 'true' : null"
          />
          <label class="input-floating-label" for="dni">DNI</label>

          @if (isInvalid('dni')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('dni','required')) { El DNI es obligatorio. }
              @else if (hasError('dni','pattern')) { Solo n√∫meros (7 u 8 d√≠gitos). }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('dni')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96">
          <input
            id="telefono"
            type="text"
            inputmode="tel"
            maxlength="20"
            placeholder="Tel√©fono"
            formControlName="telefono"
            [class.is-invalid]="isInvalid('telefono')"
            [class.is-valid]="isValid('telefono')"
            [ngClass]="[inputBase, isInvalid('telefono') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('telefono') ? 'true' : null"
          />
          <label class="input-floating-label" for="telefono">Tel√©fono</label>

          @if (isInvalid('telefono')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('telefono','required')) { El tel√©fono es obligatorio. }
              @else if (hasError('telefono','pattern')) { Ingres√° un tel√©fono v√°lido. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('telefono')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96">
          <input
            id="email"
            type="email"
            placeholder="nombre@correo.com"
            formControlName="email"
            [class.is-invalid]="isInvalid('email')"
            [class.is-valid]="isValid('email')"
            [ngClass]="[inputBase, isInvalid('email') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('email') ? 'true' : null"
          />
          <label class="input-floating-label" for="email">Email</label>

          @if (isInvalid('email')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('email','required')) { El email es obligatorio. }
              @else if (hasError('email','email')) { Formato de email inv√°lido. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('email')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96 relative">
          <input
            id="contrasena"
            [type]="showPassword ? 'text' : 'password'"
            placeholder=""
            formControlName="contrasena"
            class="pr-12"
            [class.is-invalid]="isInvalid('contrasena')"
            [class.is-valid]="isValid('contrasena')"
            [ngClass]="[inputBase, isInvalid('contrasena') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('contrasena') ? 'true' : null"
          />
          <label class="input-floating-label" for="contrasena">Contrase√±a</label>

          <button
            type="button"
            class="btn btn-text btn-sm absolute right-2 top-1/2 -translate-y-1/2"
            (click)="showPassword = !showPassword"
            [attr.aria-label]="showPassword ? 'Ocultar contrase√±a' : 'Mostrar contrase√±a'"
            tabindex="-1"
          >
            {{ showPassword ? 'üôà' : 'üëÅÔ∏è' }}
          </button>

          @if (isInvalid('contrasena')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('contrasena','required')) { La contrase√±a es obligatoria. }
              @else if (hasError('contrasena','minlength')) { M√≠nimo 6 caracteres. }
              @else if (hasError('contrasena','pattern')) { Debe incluir al menos una letra y un n√∫mero. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('contrasena')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96 relative">
          <input
            id="confirmarContrasena"
            [type]="showPassword ? 'text' : 'password'"
            placeholder=""
            formControlName="confirmarContrasena"
            class="pr-12"
            [class.is-invalid]="isInvalid('confirmarContrasena')"
            [class.is-valid]="isValid('confirmarContrasena')"
            [ngClass]="[inputBase, isInvalid('confirmarContrasena') ? hoverBad : hoverOk]"
            [attr.aria-invalid]="isInvalid('confirmarContrasena') ? 'true' : null"
          />
          <label class="input-floating-label" for="confirmarContrasena">Confirmar contrase√±a</label>

          <button
            type="button"
            class="btn btn-text btn-sm absolute right-2 top-1/2 -translate-y-1/2"
            (click)="showPassword = !showPassword"
            [attr.aria-label]="showPassword ? 'Ocultar contrase√±a' : 'Mostrar contrase√±a'"
            tabindex="-1"
          >
            {{ showPassword ? 'üôà' : 'üëÅÔ∏è' }}
          </button>

          @if (isInvalid('confirmarContrasena')) {
            <span class="helper-text ps-3 text-[var(--danger)]">
              @if (hasError('confirmarContrasena','required')) { La confirmaci√≥n es obligatoria. }
              @else if (hasError('confirmarContrasena','minlength')) { M√≠nimo 6 caracteres. }
              @else if (hasError('confirmarContrasena','pattern')) { Debe incluir al menos una letra y un n√∫mero. }
              @else if (hasError('confirmarContrasena','mismatch')) { Las contrase√±as no coinciden. }
              @else { Campo inv√°lido. }
            </span>
          } @else if (isValid('confirmarContrasena')) {
            <span class="helper-text ps-3 text-base-content/70">Se ve bien.</span>
          }
        </div>

        <div class="input-floating w-96">
          <input
            id="legajo"
            type="text"
            placeholder="Opcional"
            formControlName="legajo"
            [class.is-invalid]="isInvalid('legajo')"
            [class.is-valid]="isValid('legajo')"
            [ngClass]="[inputBase, hoverOk]"
          />
          <label class="input-floating-label" for="legajo">Legajo (opcional)</label>
        </div>

        <button
          type="submit"
          class="btn btn-lg btn-primary btn-gradient btn-block"
          [disabled]="isSubmitting() || empleadoForm.invalid"
        >
          {{ isSubmitting() ? 'Creando...' : 'Guardar empleado' }}
        </button>

        @if (errorMessage()) {
          <p class="text-center text-sm text-[var(--danger)]">
            {{ errorMessage() }}
          </p>
        }

        <button
          type="button"
          class="btn btn-text btn-block"
          (click)="cancelar()"
          [disabled]="isSubmitting()"
        >
          Cancelar
        </button>
      </form>
    </div>
  </div>
</div>
