<h2>Crear cuenta</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="register-form" novalidate>
  <div class="field">
    <label for="nombre">Nombre</label>
    <input id="nombre" formControlName="nombre" type="text" />
    @if (hasError('nombre', 'required')) {
      <p class="error">El nombre es obligatorio.</p>
    }
    @if (hasError('nombre', 'minlength')) {
      <p class="error">Debe tener al menos 3 caracteres.</p>
    }
  </div>

  <div class="field">
    <label for="apellido">Apellido</label>
    <input id="apellido" formControlName="apellido" type="text" />
    @if (hasError('apellido', 'required')) {
      <p class="error">El apellido es obligatorio.</p>
    }
    @if (hasError('apellido', 'minlength')) {
      <p class="error">Debe tener al menos 3 caracteres.</p>
    }
  </div>

  <div class="field">
    <label for="dni">DNI</label>
    <input id="dni" formControlName="dni" type="text" inputmode="numeric" maxlength="8" />
    @if (hasError('dni', 'required')) {
      <p class="error">El DNI es obligatorio.</p>
    }
    @if (hasError('dni', 'pattern')) {
      <p class="error">Solo numeros (7 u 8 digitos).</p>
    }
  </div>

  <div class="field">
    <label for="telefono">Telefono</label>
    <input id="telefono" formControlName="telefono" type="text" inputmode="tel" maxlength="10" />
    @if (hasError('telefono', 'required')) {
      <p class="error">El telefono es obligatorio.</p>
    }
    @if (hasError('telefono', 'pattern')) {
      <p class="error">Debe tener exactamente 10 numeros.</p>
    }
  </div>

  <div class="field">
    <label for="email">Email</label>
    <input id="email" type="email" formControlName="email" />
    @if (hasError('email', 'required')) {
      <p class="error">El email es obligatorio.</p>
    }
    @if (hasError('email', 'email')) {
      <p class="error">Formato de email invalido.</p>
    }
  </div>

  <div class="field">
    <label for="contrasena">Contrasena</label>
    <input id="contrasena" type="password" formControlName="contrasena" />
    @if (hasError('contrasena', 'required')) {
      <p class="error">La contrasena es obligatoria.</p>
    }
    @if (hasError('contrasena', 'minlength')) {
      <p class="error">Minimo 4 caracteres.</p>
    }
    @if (hasError('contrasena', 'pattern')) {
      <p class="error">Incluye al menos un numero.</p>
    }
  </div>

  <button type="submit" [disabled]="loading">
    {{ loading ? 'Creando...' : 'Registrarme' }}
  </button>

  @if (error) {
    <p class="error global-error">{{ error }}</p>
  }
</form>
